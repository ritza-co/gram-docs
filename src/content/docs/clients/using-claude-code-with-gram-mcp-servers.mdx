---
title: "Using Claude Code with Gram-hosted MCP servers"
description: "Learn how to connect Claude Code to Gram-hosted MCP servers, giving Claude access to your APIs and tools directly from the terminal."
sidebar:
  order: 1
---

[Claude Code](https://docs.anthropic.com/en/docs/claude-code) is Anthropic's terminal-based tool that brings Claude's capabilities directly to your command line. Unlike Claude Desktop, which runs in a graphical interface, the Claude Code CLI can access your current project folder.

![Claude Code terminal interface showing welcome message](/img/guides/claude-code/claude-code-intro.png)

When combined with [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) servers, Claude Code becomes even more useful. Using MCP servers, you can give Claude access to your tools and infrastructure, allowing it to work with your APIs, databases, and other services.

This guide will show you how to connect Claude Code to a [Gram-hosted MCP server](/blog/the-easiest-way-to-host-mcp-servers) using Taskmaster, a full-stack CRUD application for task and project management. Taskmaster includes a web UI for managing projects and tasks, a built-in HTTP API, OAuth 2.0 authentication, and a Neon PostgreSQL database for storing data. You can try the [demo app](https://taskmaster-speakeasyapi.vercel.app/) to see it in action.

You'll learn how to set up the connection, test it, and use natural language to manage tasks, projects, and workflows through Claude Code.

Find the full code and OpenAPI document in the [Taskmaster repository](https://github.com/speakeasy-api/taskmaster).

## Prerequisites

You'll need:

- A [Gram account](https://app.getgram.ai).
- [Claude Code](https://docs.anthropic.com/en/docs/claude-code) installed.

## Getting started

First, [authenticate with Claude Code](https://docs.anthropic.com/en/docs/claude-code/setup).

Then, verify that Claude Code is installed correctly:

```bash
claude --help
```

If installation is successful, you'll see Claude Code's available commands and options.

## Creating an MCP server

Before connecting Claude Code to a Taskmaster MCP server, you'll need to create one first. Follow the [Creating a Taskmaster MCP server](/build-mcp/creating-taskmaster-mcp-server) guide to set up your server.

## Connecting Claude Code to your Gram-hosted MCP server

Now we'll connect Claude Code to your Taskmaster MCP server.

Claude Code approaches MCP server configuration differently from Claude Desktop. Instead of using a JSON config file, you add servers using the `claude mcp add` command.

So for example, if you're using the **Public Server** configuration, the JSON configuration looks like this:

```json
{
  "mcpServers": {
    "taskmaster": {
      "command": "npx",
      "args": [
          "mcp-remote",
          "https://app.getgram.ai/mcp/ritza-rzx-taskmaster",
          "--header",
          "MCP-TASKMASTER-APIKEY-API-KEY:${MCP_TASKMASTER_APIKEY_API_KEY}",
          "--header",
          "MCP-TASKMASTER-APIKEY-SERVER-URL:${MCP_TASKMASTER_APIKEY_SERVER_URL}"
        ],
      "env": {
        "MCP_TASKMASTER_APIKEY_API_KEY": "your-api-key",
        "MCP_TASKMASTER_APIKEY_SERVER_URL": "your-server-url"
      }
    }
  }
}
```

Therefore if you're using the **Public Server** configuration, run the following command in your terminal using your MCP server URL:

```bash
claude mcp add taskmaster --scope project --env MCP_TASKMASTER_APIKEY_API_KEY=your-api-key --env MCP_TASKMASTER_APIKEY_SERVER_URL=your-server-url -- npx mcp-remote https://app.getgram.ai/mcp/your-taskmaster-slug --header "MCP-TASKMASTER-APIKEY-API-KEY:${MCP_TASKMASTER_APIKEY_API_KEY}" --header "MCP-TASKMASTER-APIKEY-SERVER-URL:${MCP_TASKMASTER_APIKEY_SERVER_URL}"
```

Replace `your-api-key` and `your-server-url` with the actual values from your Taskmaster MCP server configuration, and replace `ritza-rzx-taskmaster` with your actual MCP server slug.

If you're using the **Authenticated Server** configuration, run the following command:

```bash
claude mcp add taskmaster --scope project --env GRAM_KEY=your-gram-api-key -- npx mcp-remote https://app.getgram.ai/mcp/your-taskmaster-slug --header "Gram-Environment:Default" --header "Authorization: ${GRAM_KEY}"
```

Replace `your-gram-api-key` with your actual Gram API key and `ritza-rzx-taskmaster` with your actual MCP server slug.

The JSON configuration looks like this:

```json
{
  "mcpServers": {
    "taskmaster": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://app.getgram.ai/mcp/ritza-rzx-taskmaster",
        "--header",
        "Gram-Environment:default",
        "--header",
        "Authorization:${GRAM_KEY}"
      ],
      "env": {
        "GRAM_KEY": "Bearer your-gram-api-key"
      }
    }
  }
}
```

Here's what these commands do:

- `taskmaster` - The name you're giving the server locally.
- `--scope project` adds the server to a local .mcp.json file that can be checked into your source control and shared with other users on the project. You can [read more about other scope options](https://docs.anthropic.com/en/docs/claude-code/mcp#mcp-installation-scopes) at Anthropic's documentation.
- `--env KEY=value` - Sets environment variables that will be available to the MCP server.
- `--` - Separates Claude Code flags from the server command.
- `npx mcp-remote` - The package that handles remote MCP server connections.
- `--header` - The flag that passes headers to the remote server.

## Verifying the connection

Check that the server was added successfully:

```bash
claude mcp list
```

You should see `taskmaster` in the list. 

To see the full configuration:

```bash
claude mcp get taskmaster
```

![Screenshot showing the terminal output after successfully adding and configuring an MCP server in Claude Code](/img/guides/claude-code/claude-code-mcp-install.png)

## Testing the setup

Now test the connection by starting Claude Code and managing some tasks.

First, start an interactive session with Claude Code in your terminal:

```bash
claude
```

Ask Claude a basic question like, "Can you help me create a new task?"

<video width="600" controls>
  <source src="/videos/claude-code-showcase.mp4" type="video/mp4" />
    Your browser does not support the video tag.
</video>

### Testing tool permissions

Ask Claude to create a new task for your project.

```
Create a new task called "Implement user authentication" with description "Add login and registration functionality to the app"
```

![Screenshot showing Claude Code's tool permission prompt when Claude wants to use an MCP tool](/img/guides/claude-code/claude-code-tool-permission.png)

Claude Code will use the `createTask` tool to create a new task and ask for permission to use it. A prompt will appear asking to confirm the tool call.

![Screenshot showing the result after Claude Code successfully calls the Taskmaster API tool](/img/guides/claude-code/claude-code-push-request.png)


## Troubleshooting

Let's go through some common issues and how to fix them.

### Server not found

If Claude Code can't find your server:

```bash
# Check if the server is listed
claude mcp list

# Remove and re-add the server
claude mcp remove taskmaster
claude mcp add taskmaster --scope project --env GRAM_KEY=your-gram-api-key -- npx mcp-remote https://app.getgram.ai/mcp/your-taskmaster-slug --header "Gram-Environment:Default" --header "Authorization:${GRAM_KEY}"
```

### Authentication errors

If you get authentication errors:

- Verify your Gram API key in the dashboard under **Settings > API Keys**. 
- Check that environment variables are correctly set in Gram.
- Ensure the Taskmaster API base URL is accessible.

### Tool calls not working

If Claude Code isn't calling the tools:

- Test the MCP server in the **Gram Playground** first.
- Check that the toolset includes the tools to use.
- Verify the environment is correctly configured with the required variables.

## What's next

You now have Claude Code connected to a Gram-hosted MCP server with task management capabilities.

Ready to build your own MCP server? [Try Gram today](https://getgram.ai) and see how easy it is to turn any API into agent-ready tools.


